import{_ as D}from"./CpIcon-bf619351.js";import{_ as E}from"./CpNavBar-e2d91721.js";import{m as G,p as H}from"./rules-1f659873.js";import{l as J,a as K,s as M}from"./user-cf22bde7.js";import{d as O,u as Q,a as W,b as X,r as n,o as Y,c as Z,e as u,f as p,g as k,h as t,i as o,t as w,w as c,j as V,k as x,l as I,s as ee,m as C,n as q,p as oe,q as se}from"./index-48960f67.js";import{_ as ae}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-b570a55e.js";const te="/assets/qq-cdcfd9eb.svg",r=_=>(oe("data-v-2d160f08"),_=_(),se(),_),ne={class:"login-page"},le={class:"login-head"},ue={key:0},ce={class:"cp-cell"},re=r(()=>o("span",null,"我已同意",-1)),de=r(()=>o("a",{href:"javascript:;"},"用户协议",-1)),ie=r(()=>o("span",null,"及",-1)),pe=r(()=>o("a",{href:"javascript:;"},"隐私条款",-1)),_e={class:"cp-cell"},ve=r(()=>o("div",{class:"cp-cell"},[o("a",{href:"javascript:;"},"忘记密码？")],-1)),me={class:"login-other"},fe=r(()=>o("a",{class:"icon",href:"https://graph.qq.com/oauth2.0/authorize?client_id=102015968&response_type=token&scope=all&redirect_uri=http%3A%2F%2Fconsult-patients.itheima.net%2Flogin%2Fcallback"},[o("img",{src:te,alt:""})],-1)),he=O({__name:"index",setup(_){const f=Q(),S=W(),U=X(),v=n(!1),l=n(!0),h=n(!1),d=n("13230000001"),g=n("abc12345"),m=n(""),i=n(0);let y;const P=async()=>{if(!h.value)return ee("请勾选我已同意");const a=l.value?await J(d.value,g.value):await K(d.value,m.value);if(a.data.code==500)return C(a.data.message);U.saveUser(a.data.data),q("登录成功");const e=S.query.returnPath;e?f.push(e):f.push("/")},j=async()=>{const{data:a}=await M(d.value);if(a.code==500)return C(a.message);q("发送成功"),m.value=a.data.code,i.value=60,y=setInterval(()=>{i.value--,i.value<=0&&clearInterval(y)},1e3)};Y(()=>{clearInterval(y)});const A=()=>{f.push("/register")},B=Z(()=>v.value?"text":"password");return(a,e)=>{const F=E,R=u("van-icon"),b=u("van-field"),T=D,$=u("van-checkbox"),N=u("van-button"),L=u("van-form"),z=u("van-divider");return p(),k("div",ne,[t(F,{"right-text":"注册",isLeftArrow:!1,onClick:A}),o("div",le,[o("h3",null,w(l.value?"密码登录":"短信验证码登录"),1),o("a",{href:"javascript:;",onClick:e[0]||(e[0]=s=>l.value=!l.value)},[o("span",null,w(l.value?"短信验证码登录":"密码登录"),1),t(R,{name:"arrow"})])]),t(L,{autocomplete:"off",onSubmit:P},{default:c(()=>[t(b,{placeholder:"请输入手机号",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),rules:V(G),type:"tel"},null,8,["modelValue","rules"]),l.value?(p(),x(b,{key:0,placeholder:"请输入密码",modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),rules:V(H),type:B.value},{button:c(()=>[t(T,{onClick:e[2]||(e[2]=s=>v.value=!v.value),name:`login-login-eye-${v.value?"on":"off"}`},null,8,["name"])]),_:1},8,["modelValue","rules","type"])):(p(),x(b,{key:1,placeholder:"短线验证码",modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=s=>m.value=s),rules:[{required:!0,message:"请输入验证码"},{pattern:/^\d{6}$/,message:"验证码6个数字"}]},{button:c(()=>[i.value?(p(),k("span",ue,w(i.value)+"s后再次发送",1)):(p(),k("span",{key:1,class:"btn-send",onClick:j},"发送验证码"))]),_:1},8,["modelValue"])),o("div",ce,[t($,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=s=>h.value=s)},{default:c(()=>[re,de,ie,pe]),_:1},8,["modelValue"])]),o("div",_e,[t(N,{block:"",round:"",type:"primary","native-type":"submit"},{default:c(()=>[I("登 录")]),_:1})]),ve]),_:1}),o("div",me,[t(z,null,{default:c(()=>[I("第三方登录")]),_:1}),fe])])}}});const Ie=ae(he,[["__scopeId","data-v-2d160f08"]]);export{Ie as default};
