import{_ as k}from"./CpRadioBtn-a028ab35.js";import{_ as w}from"./CpIcon-79c53c60.js";import{_ as S}from"./CpNavBar-a0db6a68.js";import{d as B,D as F,u as N,r as T,c as A,v as M,Q as o,e as _,f as U,g as z,i as s,h as a,j as i,x as O,y as R,w as j,l as q,N as E,F as H,p as L,q as P}from"./index-5296d490.js";import{_ as Q}from"./avatar-doctor-1e06410a.js";import{I as p}from"./index-e2c7d3ed.js";import{u as W}from"./consult-1b8a7ed9.js";import{s as Y}from"./function-call-a8107c38.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-ac0879f0.js";const u=c=>(L("data-v-d4e89c0d"),c=c(),P(),c),G={class:"consult-illness-page"},J={class:"illness-tip van-hairline--bottom"},K=u(()=>s("img",{class:"img",src:Q},null,-1)),X={class:"info"},Z=u(()=>s("p",{class:"tit"},"在线killer",-1)),ss=u(()=>s("p",{class:"tip"},"请描述你的疾病或症状、是否用药、就诊经历，需要我听过什么样的帮助",-1)),es={class:"safe"},os=u(()=>s("span",null,"内容仅killer可见",-1)),ls={class:"illness-form"},ts={class:"item"},as=u(()=>s("p",null,"本次患病多久了？",-1)),ns={class:"item"},is=u(()=>s("p",null,"此次病情是否去医院就诊过？",-1)),us={class:"illness-img"},cs={class:"tip"},ds=B({__name:"ConsultIllness",setup(c){const d=F(),v=N(),f=[{label:"一周内",value:p.Week},{label:"一月内",value:p.Month},{label:"半年内",value:p.HalfYear},{label:"大于半年",value:p.More}],h=[{label:"就诊过",value:0},{label:"没就诊过",value:1}],r=T([]),g=l=>{Array.isArray(l)||l.file&&(l.status="uploading",l.message="上传中...",W(l.file).then(e=>{var n;l.status="done",l.message=void 0,l.url=e.data.data.url,(n=o.value.pictures)==null||n.push(e.data.data)}).catch(()=>{l.status="failed",l.message="上传失败"}))},V=l=>{var e;o.value.pictures=(e=o.value.pictures)==null?void 0:e.filter(n=>n.url!==l.url)},b=A(()=>!o.value.illnessDesc||o.value.illnessTime===void 0||o.value.consultFlag===void 0),x=()=>{d.setIllness(o.value),v.push("/patient?isSelect=1")};return M(()=>{d.consult.illnessDesc&&Y({title:"温馨提示",message:"是否恢复您之前填写的信息呢？",confirmButtonColor:"var(--cp-primary)"}).then(()=>{o.value=d.consult,r.value=d.consult.pictures||[]})}),(l,e)=>{const n=S,I=w,C=_("van-field"),m=k,y=_("van-uploader"),D=_("van-button");return U(),z(H,null,[s("div",G,[a(n,{title:"图文咨询"})]),s("div",J,[K,s("div",X,[Z,ss,s("p",es,[a(I,{name:"consult-safe"}),os])])]),s("div",ls,[a(C,{type:"textarea",rows:"3",placeholder:"请详细描述您的病情，病情描述不能为空",modelValue:i(o).illnessDesc,"onUpdate:modelValue":e[0]||(e[0]=t=>i(o).illnessDesc=t)},null,8,["modelValue"]),s("div",ts,[as,a(m,{options:f,modelValue:i(o).illnessTime,"onUpdate:modelValue":e[1]||(e[1]=t=>i(o).illnessTime=t)},null,8,["modelValue"])]),s("div",ns,[is,a(m,{options:h,modelValue:i(o).consultFlag,"onUpdate:modelValue":e[2]||(e[2]=t=>i(o).consultFlag=t)},null,8,["modelValue"])]),s("div",us,[a(y,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),"upload-icon":"photo-o","upload-text":"上传图片","max-count":"9","max-size":5*1024*1024,"after-read":g,onDelete:V},null,8,["modelValue"]),O(s("p",cs,"上传内容仅医生可见,最多9张图,最大5MB",512),[[R,!r.value.length]])]),a(D,{onClick:x,class:E({disabled:b.value}),type:"primary",block:"",round:""},{default:j(()=>[q("下一步")]),_:1},8,["class"])])],64)}}});const xs=$(ds,[["__scopeId","data-v-d4e89c0d"]]);export{xs as default};
