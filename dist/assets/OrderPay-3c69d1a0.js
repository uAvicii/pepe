import{_ as $}from"./CpNavBar-a86a2f9c.js";import{g as w,a as B}from"./order-c929076a.js";import{d as A,a as C,r as h,v as F,e as o,f as i,g as u,h as a,i as e,t as s,F as g,B as N,w as p,l as f,J as y,k as V}from"./index-0098951a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./request-21aa91d0.js";const I={key:0,class:"order-pay-page"},q={class:"order-address"},L={class:"area"},M={class:"detail"},O={class:"order-medical"},R=e("div",{class:"head"},[e("h3",null,"优医药房"),e("small",null,"优医质保 假一赔十")],-1),j=["src"],z={class:"info"},E={class:"name"},J={class:"size"},S={class:"price"},T={class:"desc"},G={class:"order-detail"},H={class:"order-tip"},K=e("p",{class:"tip"}," 由于药品的特殊性，如非错发、漏发药品的情况，药品一经发出 不得退换，请核对药品信息无误后下单。 ",-1),Q=e("a",{href:"javascript:;"},"支付协议",-1),te=A({__name:"OrderPay",setup(U){const x=C(),n=h(),t=h();return F(async()=>{const v=await w({prescriptionId:x.query.id}),r=await B();if(n.value=v.data.data,r.data.data.length){const c=r.data.data.find(_=>_.isDefault===0);c?t.value=c:t.value=r.data.data[0]}}),(v,r)=>{const c=$,_=o("van-icon"),k=o("van-tag"),d=o("van-cell"),b=o("van-cell-group"),D=o("van-checkbox"),P=o("van-submit-bar"),m=o("van-skeleton");return i(),u(g,null,[n.value&&t.value?(i(),u("div",I,[a(c,{title:"药品支付"}),e("div",q,[e("p",L,[a(_,{name:"location"}),e("span",null,s(t.value.province+t.value.city+t.value.county),1)]),e("p",M,s(t.value.addressDetail),1),e("p",null,s(t.value.receiver)+" "+s(t.value.mobile.replace(/^(\d{3})(?:\d{4})(\d{4})$/,"$1****$2")),1)]),e("div",O,[R,(i(!0),u(g,null,N(n.value.medicines,l=>(i(),u("div",{class:"item van-hairline--top",key:l.id},[e("img",{class:"img",src:l.avatar,alt:""},null,8,j),e("div",z,[e("p",E,[e("span",null,s(l.name),1),e("span",null,"x"+s(l.quantity),1)]),e("p",J,[l.prescriptionFlag===1?(i(),V(k,{key:0},{default:p(()=>[f("处方药")]),_:1})):y("",!0),e("span",null,s(l.specs),1)]),e("p",S,"￥"+s(l.amount),1)]),e("div",T,s(l.usageDosag),1)]))),128))]),e("div",G,[a(b,null,{default:p(()=>[a(d,{title:"药品金额",value:`￥${n.value.payment}`},null,8,["value"]),a(d,{title:"运费",value:`￥${n.value.expressFee}`},null,8,["value"]),a(d,{title:"优惠券",value:`-￥${n.value.couponDeduction}`},null,8,["value"]),a(d,{title:"实付款",value:`￥${n.value.actualPayment}`,class:"price"},null,8,["value"])]),_:1})]),e("div",H,[K,a(D,null,{default:p(()=>[f("我已同意"),Q]),_:1})]),a(P,{price:n.value.actualPayment*100,"button-text":"立即支付","button-type":"primary","text-align":"left"},null,8,["price"])])):y("",!0),e("div",null,[a(c,{title:"药品支付"}),a(m,{title:"",row:4,style:{"margin-top":"30px"}}),a(m,{title:"",row:4,style:{"margin-top":"30px"}})])],64)}}});export{te as default};
