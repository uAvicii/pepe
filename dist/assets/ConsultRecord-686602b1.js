import{_ as B}from"./CpNavBar-986e4cef.js";import{d as N,a as V}from"./consult-a5e7c792.js";import{_ as A}from"./avatar-doctor-a9322c0f.js";import{O as f,C as O}from"./index-e2c7d3ed.js";import{u as E,a as U}from"./index-36c350d5.js";import{d as L,r as m,e as k,f as l,g as p,i as n,t as b,N as j,j as a,h as s,w as o,l as i,J as C,k as w,n as q,m as H,p as J,q as K,F as M,B as Q}from"./index-df88b122.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-cfc236bc.js";import"./order-919405cb.js";const $=v=>(J("data-v-330ad1d5"),v=v(),K(),v),W={class:"consult-item"},G={class:"head van-hairline--bottom"},X=$(()=>n("img",{class:"img",src:A},null,-1)),Y={class:"body-row"},Z=$(()=>n("div",{class:"body-label"},"病情描述",-1)),x={class:"body-value"},ee={class:"body-row"},te=$(()=>n("div",{class:"body-label"},"价格",-1)),se={class:"body-value"},oe={class:"body-row"},ae=$(()=>n("div",{class:"body-label"},"创建时间",-1)),ne={class:"body-value tip"},le={key:0,class:"foot"},ie={key:1,class:"foot"},de={key:2,class:"foot"},re={key:3,class:"foot"},ue={class:"more"},pe={key:4,class:"foot"},ce=L({__name:"ConsultItem",props:{item:{}},emits:["on-del"],setup(v,{emit:z}){const{loading:y,onCancel:c}=E(),{showPrescription:_}=U(),u=m(!1),S=m([]),I=m(""),r=m(!1),g=e=>{r.value=!0,N(e.id).then(()=>{q("删除成功"),r.value=!1,z("on-del",e.id)}).catch(()=>{H("删除失败"),r.value=!1})};return(e,t)=>{var D,F;const d=k("van-button"),R=k("van-popover");return l(),p("div",W,[n("div",G,[X,n("p",null,b(((D=e.item.docInfo)==null?void 0:D.name)||"暂未分配医生"),1),n("span",{class:j({orange:e.item.status===a(f).ConsultPay,green:e.item.status===a(f).ConsultChat})},b(e.item.statusValue),3)]),n("div",{class:"body",onClick:t[0]||(t[0]=h=>e.$router.push(`/consult/${e.item.id}`))},[n("div",Y,[Z,n("div",x,b(e.item.illnessDesc),1)]),n("div",ee,[te,n("div",se,"¥ "+b((F=e.item.payment)==null?void 0:F.toFixed(2)),1)]),n("div",oe,[ae,n("div",ne,b(e.item.createTime),1)])]),e.item.status===a(f).ConsultPay?(l(),p("div",le,[s(d,{class:"gray",plain:"",size:"small",round:"",loading:a(y),onClick:t[1]||(t[1]=h=>a(c)(e.item))},{default:o(()=>[i("取消问诊")]),_:1},8,["loading"]),s(d,{type:"primary",plain:"",size:"small",round:"",to:`/consult/${e.item.id}`},{default:o(()=>[i(" 去支付 ")]),_:1},8,["to"])])):C("",!0),e.item.status===a(f).ConsultWait?(l(),p("div",ie,[s(d,{class:"gray",plain:"",size:"small",round:"",loading:a(y),onClick:t[2]||(t[2]=h=>a(c)(e.item))},{default:o(()=>[i("取消问诊")]),_:1},8,["loading"]),s(d,{type:"primary",plain:"",size:"small",round:"",to:`/room?orderId=${e.item.id}`},{default:o(()=>[i(" 继续沟通 ")]),_:1},8,["to"])])):C("",!0),e.item.status===a(f).ConsultChat?(l(),p("div",de,[e.item.prescriptionId?(l(),w(d,{key:0,class:"gray",plain:"",size:"small",round:"",onClick:t[3]||(t[3]=h=>a(_)(e.item.prescriptionId))},{default:o(()=>[i(" 查看处方 ")]),_:1})):C("",!0),s(d,{type:"primary",plain:"",size:"small",round:"",to:`/room?orderId=${e.item.id}`},{default:o(()=>[i(" 继续沟通 ")]),_:1},8,["to"])])):C("",!0),e.item.status===a(f).ConsultComplete?(l(),p("div",re,[n("div",ue,[s(R,{placement:"top-start",show:u.value,"onUpdate:show":t[4]||(t[4]=h=>u.value=h),actions:S.value,onSelect:I.value},{reference:o(()=>[i(" 更多 ")]),_:1},8,["show","actions","onSelect"])]),s(d,{class:"gray",plain:"",size:"small",round:"",to:`/room?orderId=${e.item.id}`},{default:o(()=>[i(" 问诊记录 ")]),_:1},8,["to"]),e.item.evaluateId?(l(),w(d,{key:1,class:"gray",plain:"",size:"small",round:""},{default:o(()=>[i(" 查看评价 ")]),_:1})):(l(),w(d,{key:0,type:"primary",plain:"",size:"small",round:""},{default:o(()=>[i(" 去评价 ")]),_:1}))])):C("",!0),e.item.status===a(f).ConsultCancel?(l(),p("div",pe,[s(d,{class:"gray",plain:"",size:"small",round:"",loading:r.value,onClick:t[5]||(t[5]=h=>g(e.item))},{default:o(()=>[i("删除订单")]),_:1},8,["loading"]),s(d,{type:"primary",plain:"",size:"small",round:"",to:"/"},{default:o(()=>[i("咨询其他医生")]),_:1})])):C("",!0)])}}});const _e=P(ce,[["__scopeId","data-v-330ad1d5"]]),me={class:"consult-list"},ve=L({__name:"ConsultList",props:{type:{}},setup(v){const y=m({type:v.type,current:1,pageSize:10}),c=m(!1),_=m(!1),u=m([]),S=r=>{u.value=u.value.filter(g=>g.id!==r),I()},I=async()=>{const r=await V(y.value);u.value.push(...r.data.data.rows),y.value.current<r.data.data.pageTotal?y.value.current++:_.value=!0,c.value=!1};return(r,g)=>{const e=k("van-list");return l(),p("div",me,[s(e,{loading:c.value,"onUpdate:loading":g[0]||(g[0]=t=>c.value=t),finished:_.value,"finished-text":"没有更多了",onLoad:I,onOnDel:S},{default:o(()=>[(l(!0),p(M,null,Q(u.value,t=>(l(),w(_e,{key:t==null?void 0:t.id,item:t},null,8,["item"]))),128))]),_:1},8,["loading","finished"])])}}});const T=P(ve,[["__scopeId","data-v-3feb5a98"]]),ye={class:"consult-page"},fe=L({__name:"ConsultRecord",setup(v){return(z,y)=>{const c=B,_=k("van-tab"),u=k("van-tabs");return l(),p("div",ye,[s(c,{title:"LIST"}),s(u,{sticky:""},{default:o(()=>[s(_,{title:"Q&A"},{default:o(()=>[s(T,{type:a(O).Fast},null,8,["type"])]),_:1}),s(_,{title:"LOOK-FOR"},{default:o(()=>[s(T,{type:a(O).Doctor},null,8,["type"])]),_:1}),s(_,{title:"OTHER"},{default:o(()=>[s(T,{type:a(O).Medication},null,8,["type"])]),_:1})]),_:1})])}}});const Se=P(fe,[["__scopeId","data-v-e6b3658a"]]);export{Se as default};
